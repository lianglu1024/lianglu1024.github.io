对页中的记录进行增删改操作的过程中，我们必须通过一些诸如记录移动的操作来始终保证这个状态一直成立 ：下一个数据页中用户记录的主键值必须大于上一个页中用户记录的主键值。这个过程我们也可以称为**页分裂**。 



## 自增主键

也就是说，自增主键的插入数据模式，正符合了我们提到的递增插入的场景。每次插入一条新记录，都是追加操作，都不涉及到挪动其他记录，**也不会触发叶子节点的分裂。**



## 自动提交

```
show variables like "%autocommit%"
```



* 执行ddl语句的时候会隐式提交事务，不管我们事务是否开启关闭



* InnoDB采取的方式是:将数据划 分为若干个⻚，以⻚作为磁盘和内存之间交互的基本单位，InnoDB 中⻚的大小一般为 16 KB。也就是在一般情况下，一次最少从磁盘 中读取16KB的内容到内存中，一次最少把内存中的16KB内容刷新到 磁盘中。 





![image-20200820151922010](https://tva1.sinaimg.cn/large/007S8ZIlly1ghxawsyjysj30z709n7d1.jpg)



![image-20200827193743285](https://tva1.sinaimg.cn/large/007S8ZIlly1gi5lpssnkyj310d0jd4c1.jpg)

具体来说，当有一条记录需要更新的时候，InnoDB引擎就会先把记录写到redo log（粉板）里面，并更新内存，这个时候更新就算完成了。同时，InnoDB引擎会在适当的时候，将这个操作记录更新到磁盘里面，而这个更新往往是在系统比较空闲的时候做，这就像打烊以后掌柜做的事。



## redo log和binlog的区别

1. redo log是InnoDB引擎特有的；binlog是MySQL的Server层实现的，所有引擎都可以使用。
2. redo log是物理日志，记录的是“在某个数据页上做了什么修改”；binlog是逻辑日志，记录的是这个语句的原始逻辑，比如“给ID=2这一行的c字段加1 ”。
3. redo log是循环写的，空间固定会用完；binlog是可以追加写入的。“追加写”是指binlog文件写到一定大小后会切换到下一个，并不会覆盖以前的日志。



## 两阶段提交



